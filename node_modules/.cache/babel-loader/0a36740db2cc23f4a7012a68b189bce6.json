{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/darkp/pepHackathon/pephackathon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/darkp/pepHackathon/pephackathon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/darkp/pepHackathon/pephackathon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/darkp/pepHackathon/pephackathon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/darkp/pepHackathon/pephackathon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/darkp/pepHackathon/pephackathon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Axios from\"axios\";import UpdateForm from\"./UpdateForm\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Week=/*#__PURE__*/function(_Component){_inherits(Week,_Component);var _super=_createSuper(Week);function Week(props){var _this;_classCallCheck(this,Week);_this=_super.call(this,props);_this.detailsForUpdate=function(obj){_this.setState({start:obj.starttime.substring(0,5),end:obj.endtime.substring(0,5),task:obj.task});};_this.state={weekDays:[\"SUN\",\"MON\",\"TUE\",\"WED\",\"THURS\",\"FRI\",\"SAT\"],show:[],startDay:-1,date:0,start:\"\",end:\"\",task:\"\"};return _this;}_createClass(Week,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(props){if(props.view!==\"Week\"||props.date+\"\"===\"\")return false;return true;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(props){if(props.date===this.state.date)return;this.getData();}},{key:\"getData\",value:function(){var _getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var curr,name,weekStart,dbdata,weekInfo,i,daydata;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:weekInfo=function _weekInfo(str,day){return new Promise(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resolve){var date;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(day<1||day>30){resolve([]);}day=day+\"\";date=\"2021-06-\"+(day.length===1?\"0\"+day:day);_context2.next=5;return Axios.get(\"https://schedule-calender.herokuapp.com/data\",{params:{name:str,date:date}}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var currday;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currday=response.data;resolve(currday);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}());case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}());};curr=this.state;name=this.props.str;weekStart=curr.startDay+curr.date*7;dbdata=[];i=weekStart;case 6:if(!(i<weekStart+7)){_context3.next=14;break;}_context3.next=9;return weekInfo(name,i);case 9:daydata=_context3.sent;dbdata.push(daydata);case 11:i++;_context3.next=6;break;case 14:this.setState({show:dbdata});case 15:case\"end\":return _context3.stop();}}},_callee3,this);}));function getData(){return _getData.apply(this,arguments);}return getData;}()},{key:\"render\",value:function render(){var _this2=this;var props=this.props;var curr=this.state;var i=0;return/*#__PURE__*/_jsxs(\"div\",{className:\"WeekParent\",children:[/*#__PURE__*/_jsx(UpdateForm,{name:props.str,start:curr.start,task:curr.task,date:curr.date,end:curr.end}),curr.show.map(function(day,ind){return/*#__PURE__*/_jsxs(\"div\",{className:\"WeekDayParent\",children:[/*#__PURE__*/_jsx(\"div\",{className:i===0||i===6?\"Wday Wend\":\"Wday\",children:curr.weekDays[i++]},ind),/*#__PURE__*/_jsx(\"div\",{className:\"data data-week\",children:day.map(function(obj,index){return obj.task===undefined?/*#__PURE__*/_jsx(React.Fragment,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"dataContainer\",onClick:function onClick(){return _this2.detailsForUpdate(obj);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"range\",children:[obj.starttime.substring(0,5),\" -\",obj.endtime.substring(0,5)]},index+\"r\"),/*#__PURE__*/_jsx(\"div\",{className:\"task\",children:obj.task},index+\"t\")]},index+\"\"+{ind:ind});})},ind+\"d\")]},ind);})]});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.date+\"\"===\"\")return{};return{date:props.date};}}]);return Week;}(Component);export default Week;","map":{"version":3,"sources":["C:/Users/darkp/pepHackathon/pephackathon/src/Week.js"],"names":["React","Component","Axios","UpdateForm","Week","props","detailsForUpdate","obj","setState","start","starttime","substring","end","endtime","task","state","weekDays","show","startDay","date","view","getData","weekInfo","str","day","Promise","resolve","length","get","params","name","then","response","currday","data","curr","weekStart","dbdata","i","daydata","push","map","ind","index","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Axios from \"axios\";\r\nimport UpdateForm from \"./UpdateForm\";\r\nimport \"./App.css\";\r\n\r\nclass Week extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            weekDays: [\"SUN\", \"MON\", \"TUE\", \"WED\", \"THURS\", \"FRI\", \"SAT\"],\r\n            show: [],\r\n            startDay: -1,\r\n            date: 0,\r\n            start: \"\",\r\n            end: \"\",\r\n            task: \"\",\r\n        };\r\n    }\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.date + \"\" === \"\") return {};\r\n        return { date: props.date };\r\n    }\r\n    shouldComponentUpdate(props) {\r\n        if (props.view !== \"Week\" || props.date + \"\" === \"\") return false;\r\n        return true;\r\n    }\r\n    detailsForUpdate = (obj) => {\r\n        this.setState({\r\n            start: obj.starttime.substring(0, 5),\r\n            end: obj.endtime.substring(0, 5),\r\n            task: obj.task,\r\n        });\r\n    };\r\n    componentDidUpdate(props) {\r\n        if (props.date === this.state.date) return;\r\n        this.getData();\r\n    }\r\n    async getData() {\r\n        const curr = this.state;\r\n        const name = this.props.str;\r\n        const weekStart = curr.startDay + curr.date * 7;\r\n        let dbdata = [];\r\n        function weekInfo(str, day) {\r\n            return new Promise(async (resolve) => {\r\n                if (day < 1 || day > 30) {\r\n                    resolve([]);\r\n                }\r\n                day = day + \"\";\r\n                let date = \"2021-06-\" + (day.length === 1 ? \"0\" + day : day);\r\n                await Axios.get(\r\n                    \"https://schedule-calender.herokuapp.com/data\",\r\n                    {\r\n                        params: { name: str, date: date },\r\n                    }\r\n                ).then(async (response) => {\r\n                    let currday = response.data;\r\n                    resolve(currday);\r\n                });\r\n            });\r\n        }\r\n        for (let i = weekStart; i < weekStart + 7; i++) {\r\n            let daydata = await weekInfo(name, i);\r\n            dbdata.push(daydata);\r\n        }\r\n        this.setState({ show: dbdata });\r\n    }\r\n    render() {\r\n        const props = this.props;\r\n        const curr = this.state;\r\n        let i = 0;\r\n        return (\r\n            <div className=\"WeekParent\">\r\n                <UpdateForm\r\n                    name={props.str}\r\n                    start={curr.start}\r\n                    task={curr.task}\r\n                    date={curr.date}\r\n                    end={curr.end}\r\n                />\r\n                {curr.show.map((day, ind) => (\r\n                    <div className=\"WeekDayParent\" key={ind}>\r\n                        <div\r\n                            key={ind}\r\n                            className={\r\n                                i === 0 || i === 6 ? \"Wday Wend\" : \"Wday\"\r\n                            }\r\n                        >\r\n                            {curr.weekDays[i++]}\r\n                        </div>\r\n\r\n                        <div className=\"data data-week\" key={ind + \"d\"}>\r\n                            {day.map((obj, index) =>\r\n                                obj.task === undefined ? (\r\n                                    <React.Fragment />\r\n                                ) : (\r\n                                    <div\r\n                                        className=\"dataContainer\"\r\n                                        key={index + \"\" + { ind }}\r\n                                        onClick={() =>\r\n                                            this.detailsForUpdate(obj)\r\n                                        }\r\n                                    >\r\n                                        <div\r\n                                            className=\"range\"\r\n                                            key={index + \"r\"}\r\n                                        >\r\n                                            {obj.starttime.substring(0, 5)} -\r\n                                            {obj.endtime.substring(0, 5)}\r\n                                        </div>\r\n                                        <div className=\"task\" key={index + \"t\"}>\r\n                                            {obj.task}\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n    componentDidMount() {\r\n        this.getData();\r\n    }\r\n}\r\n\r\nexport default Week;\r\n"]},"metadata":{},"sourceType":"module"}